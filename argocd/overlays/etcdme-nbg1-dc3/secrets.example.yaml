# TEMPLATE - Do not edit directly
#
# Usage:
#   1. Configure .env (see .env.example)
#   2. task argocd:generate-secrets
#
# This generates secrets.sops.yaml with random passwords and encrypts it.
# External credentials read from .env:
#   - AWS (Route53 DNS)
#   - SOPS AGE key
#   - S3 Backup (PostgreSQL backups)
---
# Route53 credentials for cert-manager DNS01 challenge
apiVersion: v1
kind: Secret
metadata:
  name: route53-credentials
  namespace: cert-manager
type: Opaque
stringData:
  access-key-id: REPLACE_ME
  secret-access-key: REPLACE_ME
  hosted-zone-id: REPLACE_ME
---
# Keycloak database credentials
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-secrets
  namespace: keycloak
type: Opaque
stringData:
  db-username: keycloak
  db-password: REPLACE_ME
---
# n8n client secret for Keycloak sync job
apiVersion: v1
kind: Secret
metadata:
  name: n8n-client-secret
  namespace: keycloak
type: Opaque
stringData:
  client-secret: REPLACE_N8N_CLIENT_SECRET
---
# uptime-kuma client secret for Keycloak sync job
apiVersion: v1
kind: Secret
metadata:
  name: uptime-kuma-client-secret
  namespace: keycloak
type: Opaque
stringData:
  client-secret: REPLACE_UPTIME_KUMA_CLIENT_SECRET
---
# PostgreSQL credentials (must match keycloak db-password)
apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  namespace: postgres
type: kubernetes.io/basic-auth
stringData:
  username: keycloak
  password: REPLACE_ME
---
# n8n database credentials for postgres init job
apiVersion: v1
kind: Secret
metadata:
  name: n8n-postgres-creds
  namespace: postgres
type: Opaque
stringData:
  username: n8n
  password: REPLACE_N8N_DB_PASSWORD
---
# S3 backup credentials for PostgreSQL CNPG backups
apiVersion: v1
kind: Secret
metadata:
  name: s3-backup-credentials
  namespace: postgres
type: Opaque
stringData:
  ACCESS_KEY_ID: REPLACE_S3_BACKUP_ACCESS_KEY
  ACCESS_SECRET_KEY: REPLACE_S3_BACKUP_SECRET_KEY
---
# Grafana admin credentials
apiVersion: v1
kind: Secret
metadata:
  name: grafana-admin
  namespace: monitoring
type: Opaque
stringData:
  admin-user: admin
  admin-password: REPLACE_ME
---
# ArgoCD secret (required for ArgoCD to function)
apiVersion: v1
kind: Secret
metadata:
  name: argocd-secret
  namespace: argocd
  labels:
    app.kubernetes.io/name: argocd-secret
    app.kubernetes.io/part-of: argocd
type: Opaque
stringData:
  server.secretkey: REPLACE_ME
---
# n8n namespace secrets
# oauth2-proxy credentials for n8n
apiVersion: v1
kind: Secret
metadata:
  name: n8n-oauth2-proxy
  namespace: n8n
type: Opaque
stringData:
  client-id: n8n
  client-secret: REPLACE_N8N_CLIENT_SECRET
  cookie-secret: REPLACE_N8N_COOKIE_SECRET
---
# n8n database credentials (community-charts expects postgres-password key)
apiVersion: v1
kind: Secret
metadata:
  name: n8n-postgres
  namespace: n8n
type: Opaque
stringData:
  postgres-password: REPLACE_N8N_DB_PASSWORD
---
# n8n encryption key
apiVersion: v1
kind: Secret
metadata:
  name: n8n-encryption
  namespace: n8n
type: Opaque
stringData:
  N8N_ENCRYPTION_KEY: REPLACE_N8N_ENCRYPTION_KEY
---
# uptime-kuma namespace secrets
# Admin credentials for Uptime Kuma
apiVersion: v1
kind: Secret
metadata:
  name: uptime-kuma-admin
  namespace: uptime-kuma
type: Opaque
stringData:
  username: admin
  password: REPLACE_UPTIME_KUMA_ADMIN_PASSWORD
---
# oauth2-proxy credentials for uptime-kuma
apiVersion: v1
kind: Secret
metadata:
  name: uptime-kuma-oauth2-proxy
  namespace: uptime-kuma
type: Opaque
stringData:
  client-id: uptime-kuma
  client-secret: REPLACE_UPTIME_KUMA_CLIENT_SECRET
  cookie-secret: REPLACE_UPTIME_KUMA_COOKIE_SECRET
---
# Playwright MCP auth token
apiVersion: v1
kind: Secret
metadata:
  name: playwright-mcp-auth
  namespace: playwright-mcp
type: Opaque
stringData:
  token: REPLACE_PLAYWRIGHT_MCP_TOKEN
---
# SOPS AGE key for ArgoCD repo-server decryption
apiVersion: v1
kind: Secret
metadata:
  name: sops-age-key
  namespace: argocd
type: Opaque
stringData:
  keys.txt: |
    # AGE-SECRET-KEY-REPLACE_ME
