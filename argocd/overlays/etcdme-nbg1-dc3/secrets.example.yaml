# TEMPLATE - Do not edit directly
#
# Usage:
#   1. Configure .env (see .env.example)
#   2. task argocd:generate-secrets
#
# This generates secrets.sops.yaml with random passwords and encrypts it.
# Only AWS credentials and AGE key are read from .env.
---
# Route53 credentials for cert-manager DNS01 challenge
apiVersion: v1
kind: Secret
metadata:
  name: route53-credentials
  namespace: cert-manager
type: Opaque
stringData:
  access-key-id: REPLACE_ME
  secret-access-key: REPLACE_ME
  hosted-zone-id: REPLACE_ME
---
# Keycloak database credentials
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-secrets
  namespace: keycloak
type: Opaque
stringData:
  db-username: keycloak
  db-password: REPLACE_ME
---
# n8n client secret for Keycloak sync job
apiVersion: v1
kind: Secret
metadata:
  name: n8n-client-secret
  namespace: keycloak
type: Opaque
stringData:
  client-secret: REPLACE_N8N_CLIENT_SECRET
---
# PostgreSQL credentials (must match keycloak db-password)
apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  namespace: postgres
type: kubernetes.io/basic-auth
stringData:
  username: keycloak
  password: REPLACE_ME
---
# n8n database credentials for postgres init job
apiVersion: v1
kind: Secret
metadata:
  name: n8n-postgres-creds
  namespace: postgres
type: Opaque
stringData:
  username: n8n
  password: REPLACE_N8N_DB_PASSWORD
---
# Grafana admin credentials
apiVersion: v1
kind: Secret
metadata:
  name: grafana-admin
  namespace: monitoring
type: Opaque
stringData:
  admin-user: admin
  admin-password: REPLACE_ME
---
# ArgoCD secret (required for ArgoCD to function)
apiVersion: v1
kind: Secret
metadata:
  name: argocd-secret
  namespace: argocd
  labels:
    app.kubernetes.io/name: argocd-secret
    app.kubernetes.io/part-of: argocd
type: Opaque
stringData:
  server.secretkey: REPLACE_ME
---
# n8n namespace secrets
# oauth2-proxy credentials for n8n
apiVersion: v1
kind: Secret
metadata:
  name: n8n-oauth2-proxy
  namespace: n8n
type: Opaque
stringData:
  client-id: n8n
  client-secret: REPLACE_N8N_CLIENT_SECRET
  cookie-secret: REPLACE_N8N_COOKIE_SECRET
---
# n8n database credentials (community-charts expects postgres-password key)
apiVersion: v1
kind: Secret
metadata:
  name: n8n-postgres
  namespace: n8n
type: Opaque
stringData:
  postgres-password: REPLACE_N8N_DB_PASSWORD
---
# n8n encryption key
apiVersion: v1
kind: Secret
metadata:
  name: n8n-encryption
  namespace: n8n
type: Opaque
stringData:
  N8N_ENCRYPTION_KEY: REPLACE_N8N_ENCRYPTION_KEY
---
# SOPS AGE key for ArgoCD repo-server decryption
apiVersion: v1
kind: Secret
metadata:
  name: sops-age-key
  namespace: argocd
type: Opaque
stringData:
  keys.txt: |
    # AGE-SECRET-KEY-REPLACE_ME
