apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Apps
  - apps/root-app.yaml
  - apps/infrastructure/argocd.yaml
  - apps/infrastructure/argocd-route.yaml
  - apps/infrastructure/cilium-gateway.yaml
  - apps/infrastructure/cloudnative-pg.yaml
  - apps/infrastructure/keycloak-operator.yaml
  - apps/infrastructure/postgres-cluster.yaml
  - apps/infrastructure/reloader.yaml
  - apps/monitoring/loki-stack.yaml
  - apps/monitoring/prometheus.yaml
  # Resources (only those NOT managed by child apps)
  - resources/cert-manager/cluster-issuer.yaml
  # Keycloak via operator CRDs (no child app for these)
  - resources/keycloak/instance.yaml
  - resources/keycloak/realm-import.yaml
  # All secrets are in overlay secrets.sops.yaml
  # NOTE: gateway, postgres/cluster, and routes are managed by child apps
